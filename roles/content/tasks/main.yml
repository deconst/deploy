---

- name: content service
  docker:
    name: content-service
    image: quay.io/deconst/content-service
    pull: always
    state: reloaded
    env:
      RACKSPACE_USERNAME: "{{ rackspace_username }}"
      RACKSPACE_APIKEY: "{{ rackspace_api_key }}"
      RACKSPACE_REGION: "{{ rackspace_region }}"
      ADMIN_APIKEY: "{{ content_admin_apikey }}"
      CONTENT_CONTAINER: "{{ content_container }}"
      ASSET_CONTAINER: "{{ asset_container }}"
      CONTENT_LOG_LEVEL: "{{ content_log_level }}"
    ports:
    - "{{ content_service_port }}:8080"
    restart_policy: always
